Metadata-Version: 2.4
Name: springedge
Version: 0.1.0
Summary: Edge system feature generation (regime/structural/tactical/risk + forward returns).
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: numpy>=2.0.0
Requires-Dist: pandas>=2.2.0
Provides-Extra: dev
Requires-Dist: ruff>=0.9.0; extra == "dev"
Requires-Dist: pytest>=8.0.0; extra == "dev"

# SpringEdge

Minimal "Edge system" feature generation.

## What it outputs

Per `symbol` / `date`, it generates:
- **Universe**: `universe` (optional tag you provide; e.g. `sp500`, `penny`, `other`)
- **Regime**: `regime_id`, `risk_on_off`, `vol_regime`
- **Regime label**: `regime` (e.g. `risk_on_low_vol`)
- **Structural**: `nonuple_*` (placeholders if you don't provide fundamentals) + composites (`struct_core`, `struct_growth_quality`, `struct_value_quality`)
- **Tactical**: momentum returns (`mom_ret_21/63/126`), trend (`trend_ma_50_200`), catalyst/proxies passthrough (`revisions`, `breadth`, `price_action_proxy`)
- **Risk**: `atr14`, `ann_vol_20d`, `drawdown`, `liquidity`, `leverage_flag` (placeholder)
- **Forward returns**: `fwd_ret_21/63/126/252`

## “3 top layers” support

You can organize your analysis along:
- **Stock Universe (Base)**: pass `universe="sp500"` (or use `StockUniverse.SP500`)
- **Time Horizons**: pass `horizon_days=(7, 21, 30, 60, 90, 180, 365)` and choose `horizon_basis="calendar"` (or `"trading"`)
- **Regime**: use `regime` / `regime_id` / `risk_on_off` / `vol_regime`

## Quickstart

Install:

```bash
python3 -m pip install -e ".[dev]"
```

## Database connection (Postgres)

SpringEdge includes a small helper you can reuse from any script. You provide credentials via an environment variable.

1) Install a Postgres DB driver (one of):

```bash
python3 -m pip install "psycopg[binary]"
# or
python3 -m pip install psycopg2-binary
```

2) Export your database URL:

```bash
export SPRINGEDGE_DB_URL="postgresql://USER:PASSWORD@HOST:5432/DBNAME"
# Alternatively (common convention):
export DATABASE_URL="postgresql://USER:PASSWORD@HOST:5432/DBNAME"
```

3) Use it in your script:

```python
from springedge import db_connection

with db_connection() as conn:
    # Use your driver’s DB-API interface
    cur = conn.cursor()
    cur.execute("select 1;")
    print(cur.fetchone())
```

## Table naming (prod vs demo)

By default, `springedge.edge.run_edge()` (and `python3 -m springedge.edge`) expects:
- baseline universe table: `sp500` (columns: `date`, `symbol`)
- OHLCV table: `core.prices_daily` (columns: `symbol`, `date`, `open`, `high`, `low`, `close`, `volume`)

If your production schema uses different names, SpringEdge will automatically fall back for common aliases:
- `sp500` → `sp500_tickers`
- `core.prices_daily` → `prices_daily` → `ohlcv_daily`

You can also override explicitly:

```bash
python3 -m springedge.edge --baseline-table sp500_tickers --ohlcv-table prices_daily
```

Run example:

```bash
python3 examples/compute_features.py
```

Run tests:

```bash
pytest -q
```
